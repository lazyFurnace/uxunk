index.js

import Provider from './provider';
import connect from './connect';

export { Provider, connect };

provider.js

import React from 'react';

import store from '../store';

const { Provider , Consumer } = React.createContext({...store});

export { Consumer };

export default Provider;

connect.js

import React from 'react';

import { Consumer } from './provider';

const connect = (mapStateToProps, mapDispatchToProps) => WrappedComponent => {
    return class extends React.Component {
        render() {
            const props = this.props;
            return (
                <Consumer>
                    {
                        (store) => {
                            const mapState = mapStateToProps(store.getState(), props);
                            const mapDispatch = mapDispatchToProps(store.dispatch, props);
                            return <WrappedComponent {...mapState} {...mapDispatch} {...props} />
                        }
                    }
                </Consumer>
            )
        }
    }
}

export default connect;
